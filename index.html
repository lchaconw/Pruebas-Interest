<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    const url = "https://api-sec-vlc.hotmart.com/security/oauth/token?grant_type=client_credentials&client_id=9ed8fafa-6f1d-43ec-8177-16d3f5ad3974&client_secret=74c76fb9-1866-4e08-aeb1-4a12f5035244";
    const urlusers = "https://developers.hotmart.com/payments/api/v1/subscriptions?status=ACTIVE&product_id=1581740";

    const options = {
      method: 'POST',
      mode: 'opaque',
      headers: {
        'Content-Type' : 'application/json',
        'Authorization': "Basic OWVkOGZhZmEtNmYxZC00M2VjLTgxNzctMTZkM2Y1YWQzOTc0Ojc0Yzc2ZmI5LTE4NjYtNGUwOC1hZWIxLTRhMTJmNTAzNTI0NA==",
        'Access-Control-Allow-Origin' : 'https://lchaconw.github.io',
        'Access-Control-Allow-Credentials' : 'true',
        'Access-Control-Allow-Methods' : 'GET, POST, OPTIONS',
        'Access-Control-Allow-Headers' : 'Origin, Content-Type, Accept'
      }
    };

    fetch(url, options)
      .then(res => res.json())
      .then(data => users(data.access_token));


    function users(data) {
      console.log(data);

      var myHeaders = new Headers();
      myHeaders.append('Content-Type', 'application/json');
      myHeaders.append('Authorization', 'Bearer ' + data);

      var requestOptions = {
        method: 'GET',
        headers: myHeaders,
        redirect: 'follow'
      };

      fetch(urlusers, requestOptions)
        .then(response => response.text())
        .then(result => console.log(result));
    }
  </script>
</body>

</html>